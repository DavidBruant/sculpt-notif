!function(){"use strict";function t(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function e(e,o){return fetch(e,o).then(t)}document.querySelector("button").addEventListener("click",(t=>{const e=document.querySelector("input").value;console.log("login",e)}));const o="https://eldritch.cafe",n=new URLSearchParams(location.search).get("code");console.log("code",n),e(`${o}/oauth/token?client_id=GwWo432HtZtw_gZh_Ax7lTVJgmaTSyu4vPW9bK9cUTg&client_secret=K_8ZGn740wCsJgPzif0sUf33589eKelPIhz7AlcSOhM&redirect_uri=http://localhost:5000/&grant_type=authorization_code&code=${n}`,{method:"POST"}).then((t=>{console.log("res",t);const{access_token:n}=t;return e(`${o}/api/v1/accounts/verify_credentials`,{headers:{Authorization:`Bearer ${n}`}}).then((t=>(console.log("logged account",t),e(`${o}/api/v1/notifications?limit=1000`,{headers:{Authorization:`Bearer ${n}`}}).then((t=>{console.log("notifs",t)})))))})).catch((t=>console.error("post nia nia",t)))}();
//# sourceMappingURL=bundle.js.map

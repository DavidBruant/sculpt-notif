{"version":3,"file":"bundle.js","sources":["../node_modules/d3-fetch/src/json.js","../scripts/main.js"],"sourcesContent":["function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","import {json} from 'd3-fetch';\n\ndocument.querySelector('button').addEventListener('click', e => {\n\tconst login = document.querySelector('input').value;\n\n\tconsole.log('login', login)\n\n\n})\n\nconst instanceOrigin = 'https://eldritch.cafe';\nconst client_id = 'GwWo432HtZtw_gZh_Ax7lTVJgmaTSyu4vPW9bK9cUTg'\nconst client_secret = 'K_8ZGn740wCsJgPzif0sUf33589eKelPIhz7AlcSOhM'\nconst redirect_uri = 'http://localhost:5000/';\n\nconst params = new URLSearchParams(location.search);\nconst code = params.get('code');\n\nconsole.log('code', code)\n\njson(`${instanceOrigin}/oauth/token?client_id=${client_id}&client_secret=${client_secret}&redirect_uri=${redirect_uri}&grant_type=authorization_code&code=${code}`, {method: 'POST'})\n.then(res => {\n\tconsole.log('res', res)\n\n\tconst {access_token} = res\n\n\treturn json(`${instanceOrigin}/api/v1/accounts/verify_credentials`, {headers: {\n\t\t'Authorization': `Bearer ${access_token}`\n\t}})\n\t.then(account => {\n\t\tconsole.log('logged account', account)\n\n\t\treturn json(`${instanceOrigin}/api/v1/notifications?limit=${1000}`, {headers: {\n\t\t\t'Authorization': `Bearer ${access_token}`\n\t\t}})\n\t\t.then(notifs => {\n\t\t\tconsole.log('notifs', notifs)\n\t\t})\n\t})\n})\n.catch(err => console.error('post nia nia', err))\n\n\n\n/*import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.querySelector('.svelte-main'),\n\tprops: {\n\t\tname: 'from Svelte'\n\t}\n});\n\nexport default app;*/"],"names":["responseJson","response","ok","Error","status","statusText","json","input","init","fetch","then","document","querySelector","addEventListener","e","login","value","console","log","instanceOrigin","code","URLSearchParams","location","search","get","method","res","access_token","headers","Authorization","account","notifs","catch","err","error"],"mappings":"yBAAA,SAASA,EAAaC,GACpB,IAAKA,EAASC,GAAI,MAAM,IAAIC,MAAMF,EAASG,OAAS,IAAMH,EAASI,YACnE,GAAwB,MAApBJ,EAASG,QAAsC,MAApBH,EAASG,OACxC,OAAOH,EAASK,OAGH,WAASC,EAAOC,GAC7B,OAAOC,MAAMF,EAAOC,GAAME,KAAKV,GCLjCW,SAASC,cAAc,UAAUC,iBAAiB,SAASC,IAC1D,MAAMC,EAAQJ,SAASC,cAAc,SAASI,MAE9CC,QAAQC,IAAI,QAASH,MAKtB,MAAMI,EAAiB,wBAMjBC,EADS,IAAIC,gBAAgBC,SAASC,QACxBC,IAAI,QAExBP,QAAQC,IAAI,OAAQE,GAEpBd,EAAK,GAAGa,wMAAoJC,IAAQ,CAACK,OAAQ,SAC5Kf,MAAKgB,IACLT,QAAQC,IAAI,MAAOQ,GAEnB,MAAMC,aAACA,GAAgBD,EAEvB,OAAOpB,EAAK,GAAGa,uCAAqD,CAACS,QAAS,CAC7EC,cAAiB,UAAUF,OAE3BjB,MAAKoB,IACLb,QAAQC,IAAI,iBAAkBY,GAEvBxB,EAAK,GAAGa,oCAAqD,CAACS,QAAS,CAC7EC,cAAiB,UAAUF,OAE3BjB,MAAKqB,IACLd,QAAQC,IAAI,SAAUa,YAIxBC,OAAMC,GAAOhB,QAAQiB,MAAM,eAAgBD"}